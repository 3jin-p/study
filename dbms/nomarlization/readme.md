정규화 (Normalization)
--

### 정규화의 기본 목적 
데이터의 중복을 방지하여, 저장공간 효율을 향상시키고 삽입 이상, 갱신 이상 등을 방지하여 무결성을 유지를 도모  

### 제 1 정규화 
테이블의 컬럼이 원자값을 갖도록 테이블을 분해하는 것   
즉 컬럼 하나당 하나의 값만을 지니도록 분해하는 것을 말한다.  

|이름|직업| 
|---|---| 
|아이유|가수, 배우|
|손흥민| 축구선수|
|마동석|배우, 근육맨|
|원빈| 배우|

위 테이블의 직업 컬럼을 보면 한 이름을 지닌 사람이 여러가지 직업을 지니고 있다.  
이러한 경우를 제 1 정규형을 만족하지 않는다고 한다.  

위 테이블이 원자성을 만족하도록 변경하면 다음과 같이 변경된다.

|이름|직업|
|---|---|
|아이유|가수|
|아이유|배우|
|손흥민|축구선수|
|마동석|배우|
|마동석|근육몬|
|원빈|배우|

### 제 2 정규화
제2 정규화란 **제 1 정규화를 진행한 테이블에 대해 완전 함수 종속을 만족하도록** 테이블을 분해하는 것이다.  

> 완전 함수 종속성이란?
> 종속자가 기본키에만 종속되며, 기본키가 여러 속성으로 구성되어 있을경우 기본키를 구성하는 모든 속성이 포함된 기본키의 부분집합에 종속된 경우를 뜻한다.

|학생번호|강의 종류|강의실|성적| 
|---|---|---|---|
|1|화성학|101|A|
|1|축구|202|D|
|2|축구|202|A|
|3|격투기|103|B+|
|3|연기|201|B+|
|4|연기|201|B|

위 테이블의 키가 (학생 번호, 강의 종류) 복합키 일때, 강의 실은 강의 종류에만 종속되지만, 성적은 학생번호와 강의종류 모두에 완전히   종속된다.  
완전 함수 종속성이란, 키가 아닌 컬럼들은 키에 완전히 종속 됨을 뜻하는데, 위 테이블의 강의실은 키의 부분집합에만 종속되는 것이다.  
즉 2차 정규화를 만족하지 못한다고 할 수 있다.  

  
위 테이블을 분해해보면  

|학생번호|강의 종류|성적|      
|---|---|---|
|1|화성학|A|
|1|축구|D|
|2|축구|A|
|3|격투기|B+|
|3|연기|B+|
|4|연기|B|

|강의 종류|강의실|
|---|---|
|화성학|101|
|축구|202|
|격투기|103|
|연기|201|

두 테이블로 분리되며 두 테이블은 완전함수 종속성을 만족한다.


### 제 3 정규화
제3 정규화란 **제2 정규화를 진행한 테이블에 대해 이행 함수 종속성을 없애도록** 테이블을 분해하는 것이다.

> 이행 함수 종속성이란?
> 테이블 내의 모든 속성이 키에만 의존하며 다른 후보키에 의존하지 않는다. 
> 즉  X, Y, Z라는 속성이 있을 때 X→Y, Y→Z 이란 종속 관계가 있을 경우, X→Z가 성립될 때를 이행 함수 종속을 만족한다고 한다.

|학생번호|수강 강의|강의 비|      
|---|---|---|
|1|화성학|5000|
|1|축구|3000|
|2|축구|3000|
|3|격투기|6000|
|3|연기|4000|
|4|연기|4000|

위 테이블을 살펴보면 학생 번호를 통하여 수강 강의를 알아내고, 수강 강의를 통하여 강의 비를 알아 낼 수 있다.  
즉 X -> Y Y-> Z 일때 X -> Z 인 이행함수 종속성을 만족한다고 볼 수 있고, 3차 정규화를 만족하지 못하는 것을 알 수 있다.  
위 테이블에서 만약 학생의 수강 강의가 변경된다면? 강의 비 까지 변경해 주어야 할 것이다. 갱신 이상으로 인해 무결성이 깨지는 원인이 된다.  

테이블을 분해해보자.

|학생번호|수강 강의|      
|---|---|
|1|화성학|
|1|축구|
|2|축구|
|3|격투기|
|3|연기|
|4|연기|

|강의 종류|강의 비|      
|---|---|
|화성학|5000|
|축구|3000|
|축구|3000|
|격투기|6000|
|연기|4000|
|연기|4000|

BCNF, 제 4, 제 5 정규형도 존재하지만   
일반적으로는 제 3 정규형이 데이터 무결성과 성능에서 가장 이상적인 트레이드오프라고 이야기 한다.    
다른 정규형들은 필요한 경우 따로 정리하도록 하자. 

