형식 맞추기
--

코드를 보면 기분이 좋은 코드  
책읽듯 읽히는 코드  
감탄이 나오는 코드 

모두가 이런 코드를 짜고 싶어한다고 생각한다.  
그런 코드의 시작은 형식을 맞추는 것이고  
형식을 맞추려면 정해진 룰에 따라 구성원들이 따라야한다.  
필요하다면 툴을 사용한다.

룰을 정하기 힘들다면, 이미 여러 곳에서 정해놓은 컨벤션이 있다.  
IDEA 에도 컨벤션을 어느정도 자동으로 맞춰주는 툴들이 많이 있다.
우리의 컨벤션과, IDEA 세팅법은 컨플루언스를 참조하자.  

###  코드 형식을 맞추는 목적 feat. Clean Code 를 익히는 목적  

개발자에게는 개발 이외에 필요한 중요한 능력이 있다. "의사소통"  
그리고 비개발자가 아닌 개발자들 사이에서 가장 큰 의사소통 수단은 "코드" 다.  

코드는 변한다. 코드를 수정할때 기존 코드의 가독성은 그 다음 코드의 품질을 좌우한다.  
일정한 형식을 지닌 코드는 그 가독성을 크게 끌어올린다. 
> 반복되는 일정된 형식은 개발자들 사이의 UX 를 향상 시킨다고 할 수 있지 않을까? 

### 적절한 행 길이를 유지하라

책에서는 JUnit, FitNesse, Time&Money 를 예로 들었다.  
이 셋은 대부분 파일 당 소스 길이가 200줄을 넘지 않는다고 한다.   
굳이 큰 파일을 만들지 않더라도, 저런 큰 시스템을 구축할 수 있다는 뜻이다.  
> 메서드 역시 마찬가지라고 생각한다. 큰 메서드를 만들지 않는 것부터 시작해서
> 객체의 책임을 적절히 할당하고 쪼개다 보면 달성되는 부분이라고 생각된다.

### 신문 기사처럼 작성하라
메서드 이름을 제목, 소스 파일 첫부분 부터 아래로 갈수록 고차원에서 세세한 부분을 다루는 하위차원으로 내려가라고 한다.  
> 이 부분은 소스 파일 이라고 되어 있지만, 호출되는 하위 메서드 라고 생각하는게 더 가깝다고 보인다. 예를들면
> ``` java
> main() {
>   exercise()
>   eat()
>   rest()
> }
> 
> exercise() {
>   pickUp()
>   while(!exhausted){
>       push()
>       pull()
>   }
> }
> 
> eat() {
>   openMouth()
>   putMeal()
>   closeMouth()
> }
> 
> ...
> ```
> 위 코드를 보면 main 함수가 조금 더 상위 레벨의 복잡한 개념들을,  
> 하위 메서드에서는 조금 더 구체적인 수행 방법을 포함하고 있다.


### 세로 밀집도

비슷한 소스는 세로로 응집 되어야한다.  
이전 챕터의 [주석](../chapter4)에서 필드를 서술하는 주석을 생각해보자.  
그러한 주석은 같은 개념을 띄는 필드들을 멀리 떨어트려 한눈에 보기 힘들게 한다.  
마찬가지로 비슷하지 않은 개념을 띄는 것들은 공백으로 구분지어 세로 밀집도를 떨어트리자.  

**밀접한 개념은 한 파일에 속해야하고 한 파일에 속할 정도로 밀접한 개념은 서로 수직거리로 밀접한 정도를 알 수 있어야한다.**

1. 변수 선언은 사용하는 부분과 가까운 곳에서 해야하며    
>가장 나쁜 예로 메서드 시작하는 부분에서 사용할 모든 변수를 선언하고 초기화 하는 것이 있다

2. 한 함수가 다른 함수를 호출하는 종속 관계에 있을 경우 두 함수는 가까이 배치해야 하며, 종속되는 함수가 더 아래쪽에 배치되는 편이 이해하기 쉽다.    
> 항상 고차원에서 저차원으로 서술한다.

3. 개념적으로 유사한 코드도 근처에 위치 시킨다.  
책에서는, Assertion 의 assertTrue() 와 assertFalse() 를 예로 들었다.  
두 함수는 종속관계는 아니지만, 명명법 부터 행위까지 개념적으로 유사하며, 서로 밀접한 위치에 정의되어 있다.  

### 가로 형식 맞추기

세로를 맞추었으니 이제 가로도 맞추어 보아야겠지?

1. 가로 길이는 한 화면에 충분히 들어갈 수 있게 한다.  
    룰은 정하기 나름이지만, 한 화면을 넘어가는 글자수는 나름의 범주 바깥이다. 120 자 정도를 권장한다고 한다.  
   
2. 가로 공백
   세로와 마찬가지로 개념적으로 밀접하지 않으면 띄워 쓴다.
   예를 들면 변수 선언과 할당사이의 '=' 연산자, 수식 연산자 등을 띄워 쓰는 것이 있다.
   또한 메서드 이름과 파라미터는 아주 밀접한 관계이므로 붙여쓴다.
   
3. 들여쓰기
    우리는 일반적으로 개발을 할때 철저히 계층을 구분한다.
    인프라에사도, 프로젝트 구조에서도 계층의 철저한 격리는 복잡도를 줄이고, 확장성을 보존한다.  
    비약이 있지만, 들여쓰기는 계층구조의 가장 작은 단위이다.
    scope 별로 들여쓰기를 한 코드는 읽고 이해하기 쉽다.
    또한 들여쓰기의 깊이가 깊어진다는 것은 리팩토링의 신호도 준다.
   

### 느낀점

이 챕터에서 지시하는 모든 사항들은 '일반적으로 좋은' 컨벤션이다.
가장 중요한 것은 팀의 컨벤션을 따르는 것이고, 팀의 컨벤션에 저 '일반적으로 좋은' 지시사항들의 의도를 잘 파악하여
녹여내는 것이 무엇보다도 중요하다고 생각이 되어 주관적인 해석을 다른 정리에 비하여 많이 덧붙였다.
    
   






